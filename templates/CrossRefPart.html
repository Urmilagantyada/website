<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>OmniPro Systems Pvt Ltd</title>
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

        <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
        <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet" crossorigin="anonymous" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" crossorigin="anonymous"></script>
        <link href="https://fonts.googleapis.com/css2?family=Lora:wght@700&display=swap" rel="stylesheet">
        <style>


        </style>
    </head>
    <body class="sb-nav-fixed">
        {%include "header.html"%}
                <main>
                       
                            
                            <form action="{{ url_for('CrossRefPart') }}" method="POST" enctype="multipart/form-data">
                               
                                
                                    <div id="dialog" class="modal">
                                        <div class="modal-content">
                                            <span class="close">&times;</span>
                                            <h2>Add CROSS REFERENCE PART </h2>
                                            <form id="studentForm">
                                                <div class="form-row">
                                                    <div class="form-group col-md-6">
                                                        <label for="manufacturerpartno"><b>Manufacturer Part No:</b></label>
                                                        <select class="form-control" id="manufacturerpartno" name="manufacturerpartno">
                                                            <option value="" disabled selected>Select Manufacturer part Number</option>
                                                            {% for customer in part_item %}
                                                            <option value="{{ customer[1] }}">{{ customer[1] }}</option>
                                                            {% endfor %}
                                                            <!-- Add more options as needed -->
                                                        </select>
                                                    </div>



                                                    <div class="form-group col-md-6">
                                                        <label for="manufacturername"><b>Manufacturer Name:</b></label>
                                                        <select class="form-control" id="manufacturername" name="manufacturername">
                                                            <option value="" disabled selected>Select Manufacturer Name</option>
                                                            {% for customer in suppliers %}
                                                            <option value="{{ customer[1] }}">{{ customer[1] }}</option>
                                                            {% endfor %}
                                                            <!-- Add more options as needed -->
                                                        </select>
                                                    </div>
                                                   
                                                 
                                                </div>
                                                <div class="form-row">



                                                    <div class="form-group col-md-6">
                                                        <label for="crossreferencepartno"><b>Cross Reference Part No:</b></label>
                                                        <select class="form-control" id="crossreferencepartno" name="crossreferencepartno">
                                                            <option value="" disabled selected>Select Manufacturer part Number</option>
                                                            {% for customer in part_item %}
                                                            <option value="{{ customer[1] }}">{{ customer[1] }}</option>
                                                            {% endfor %}
                                                            <!-- Add more options as needed -->
                                                        </select>
                                                    </div>


                                                    <div class="form-group col-md-6">
                                                        <label for="manufacturerpartno"><b>Cross Ref MFR:</b></label>
                                                        <select class="form-control" id="crossrefMFR" name="crossrefMFR">
                                                            <option value="" disabled selected>Select Manufacturer part Number</option>
                                                            {% for customer in part_item %}
                                                            <option value="{{ customer[1] }}">{{ customer[1] }}</option>
                                                            {% endfor %}
                                                            <!-- Add more options as needed -->
                                                        </select>
                                                    </div>

                                                    



                                                   
                                                    
                                                    
                                                    
                                                  
                                                </div>
                                              
                                                <div class="form-row">
                                                  
                                                    <div class="form-group col-md-4">
                                                        <label for="remarks"><b>Remarks:</b></label>
                                                        <textarea class="form-control" id="remarks" name="remarks" placeholder="Enter remarks" rows="3"></textarea>
                                                    </div>
                                                    <div class="form-group col-md-3">
                                                        <label for="updateddate"><b>Updated Date:</b></label>
                                                        <input type="date" class="form-control" id="updateddate" name="updateddate" max="{{ max_date }}">
                                                    </div>
                                                   
                                                    
                                                </div>
                                                <button type="submit" class="btn11 btn-primary borde">Submit</button>
                                               
                                                </div>
                                               
                                            </form>
                                        </div>
                                    </div>
                                
                                    <div class="card mb-4">
                                        <div class="card-header" style="padding: 5px 10px; height: 50px;">
                                            <div class="d-flex justify-content-between align-items-center h-100">
                                                <!-- Left-side buttons (Add, Contacts, Export) -->
                                                <div class="d-flex align-items-center" style="gap: 10px;">
                                                    <button id="addNewBtn" type="button" class="btn btn-primary" 
                                                            style="padding: 5px 10px; font-size: 0.85rem; border-radius: 5px;">
                                                        <i class="fas fa-plus"></i> Add
                                                    </button>
                                                    <button type="button" class="btn btn-info" style="padding: 5px 10px; font-size: 0.85rem; border-radius: 5px;" data-toggle="modal" data-target="#addContactModal">
                                                        Import
                                                     </button>
                                                    <a href="{{ url_for('export_cross_ref') }}">
                                                        <button type="button" class="btn btn-success" 
                                                                style="padding: 5px 10px; font-size: 0.85rem; border-radius: 5px;">
                                                            Export
                                                        </button>
                                                    </a>
                                                </div>
                                                <h2 style="color: #20B2AA;"> CROSS REFERENCE PART</h2>
                                                <!-- Right-side Search form -->
                                                <div class="d-flex align-items-center">
                                                    <form method="GET" action="{{ url_for('CrossRefPart') }}" class="d-flex align-items-center" enctype="multipart/form-data" style="gap: 5px;">
                                                        <label for="search" class="mb-0" style="margin-right: 5px; font-size: 0.85rem;">Search:</label>
                                                        <input type="text" id="search" name="search" value="{{ search_query }}" 
                                                               class="form-control form-control-sm" style="padding: 5px; font-size: 0.85rem; border-radius: 5px;">
                                                        <button type="submit" class="btn btn-primary" style="padding: 5px 10px; font-size: 0.85rem; border-radius: 5px;">
                                                            Search
                                                        </button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">S.no</th>
                                                        <th scope="col">Manufacturer Partno</th>
                                                        <th scope="col">Manufacturer Name</th>
                                                        <th scope="col">Cross Reference Part No</th>
                                                        <th scope="col">Cross Ref MFR</th>
                                                        <th scope="col">Remarks</th>
                                                        <th scope="col">Updated Date</th>
                                                         
                                                        <th scope="col">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for record in crossreferencepart %}
                                                    <tr>
                                                        <td>{{ (page - 1) * per_page + loop.index }}</td>
                                                        <td>{{ record[1] }}</td>
                                                        <td>{{ record[2] }}</td>
                                                        <td>{{ record[3] }}</td>
                                                        <td>{{ record[4] }}</td>
                                                        <td>{{ record[5] }}</td>
                                                        <td>{{ record[6] }}</td>
                                                        
                                                        <td>
                                                            <!-- Edit Button -->
                                                            <button class="btn btn-warning btn-sm" data-toggle="modal" data-target="#modaledit{{ record[0] }}" 
                                                                    style="position: relative; display: inline-block; cursor: pointer;"
                                                                    onmouseover="this.querySelector('.tooltiptext').style.visibility = 'visible'; this.querySelector('.tooltiptext').style.opacity = '1';"
                                                                    onmouseout="this.querySelector('.tooltiptext').style.visibility = 'hidden'; this.querySelector('.tooltiptext').style.opacity = '0';">
                                                                <i class="fas fa-edit"></i>
                                                                <span class="tooltiptext" style="
                                                                    visibility: hidden;
                                                                    width: 100px;
                                                                    background-color: black;
                                                                    color: #fff;
                                                                    text-align: center;
                                                                    border-radius: 5px;
                                                                    padding: 5px;
                                                                    position: absolute;
                                                                    z-index: 1;
                                                                    bottom: 125%;
                                                                    left: 50%;
                                                                    margin-left: -50px;
                                                                    opacity: 0;
                                                                    transition: opacity 0.3s;">
                                                                    Edit
                                                                </span>
                                                            </button>
                                        
                                                            <!-- Delete Button -->
                                                            <a href="/delete_CrossRefPart/{{ record[0] }}" onclick="return confirm('Are you sure you want to delete?');" class="btn btn-danger btn-sm"
                                                               style="position: relative; display: inline-block; cursor: pointer;"
                                                               onmouseover="this.querySelector('.tooltiptext').style.visibility = 'visible'; this.querySelector('.tooltiptext').style.opacity = '1';"
                                                               onmouseout="this.querySelector('.tooltiptext').style.visibility = 'hidden'; this.querySelector('.tooltiptext').style.opacity = '0';">
                                                                <i class="fas fa-trash-alt"></i>
                                                                <span class="tooltiptext" style="
                                                                    visibility: hidden;
                                                                    width: 100px;
                                                                    background-color: black;
                                                                    color: #fff;
                                                                    text-align: center;
                                                                    border-radius: 5px;
                                                                    padding: 5px;
                                                                    position: absolute;
                                                                    z-index: 1;
                                                                    bottom: 125%;
                                                                    left: 50%;
                                                                    margin-left: -50px;
                                                                    opacity: 0;
                                                                    transition: opacity 0.3s;">
                                                                    Delete
                                                                </span>
                                                            </a>
                                                        </td>
                                                    </tr>
                                        
                                                    <!-- Modal for Editing -->
                                                    <div id="modaledit{{ record[0] }}" class="modal fade" role="dialog">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h4 class="modal-title">Update Cross Reference Part</h4>
                                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <form action="{{ url_for('update_CrossRefPart') }}" method="POST">
                                                                        <input type="hidden" name="id" value="{{ record[0] }}">
                                                                        <div class="form-group">
                                                                            <label>Manufacturer Partno</label>
                                                                            <!-- <input type="number" class="form-control" name="manufacturerpartno" value="{{ record[1] }}" > -->
                                                                            <select class="form-control" id="manufacturerpartno" name="manufacturerpartno">
                                                                                {% for branch in part_item %}
                                                                                    <option value="{{ branch[1] }}" {% if branch[1] == record[1] %} selected {% endif %}>{{ branch[1] }}</option>
                                                                                {% endfor %}
                                                                            </select>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Manufacturer Name</label>
                                                                            <!-- <input type="text" class="form-control" name="manufacturername" value="{{ record[2] }}" > -->
                                                                            <select class="form-control" id="manufacturername" name="manufacturername">
                                                                                {% for branch in suppliers %}
                                                                                    <option value="{{ branch[1] }}" {% if branch[1] == record[2] %} selected {% endif %}>{{ branch[1] }}</option>
                                                                                {% endfor %}
                                                                            </select>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Cross Reference Part No</label>
                                                                            <input type="number" class="form-control" name="crossreferencepartno" value="{{ record[3] }}" >
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Cross Ref MFR</label>
                                                                            <input type="text" class="form-control" name="crossrefMFR" value="{{ record[4] }}" >
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Remarks</label>
                                                                            <input type="text" class="form-control" name="remarks" value="{{ record[5] }}" >
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label>Updated Date</label>
                                                                            <input type="date" class="form-control" name="updateddate" value="{{ record[6] }}" >
                                                                        </div>
                                                                        <button type="submit" class="btn btn-primary">Update</button>
                                                                    </form>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                            <ul class="pagination" style="display: flex;justify-content: flex-end;padding: 20px;">
                                                {% if page > 1 %}
                                                <li><a href="{{ url_for('CrossRefPart', page=1, search=search_query) }}">First</a></li>
                                                <li><a href="{{ url_for('CrossRefPart', page=page-1, search=search_query) }}">Previous</a></li>
                                                {% endif %}
                                                {% for p in range(1, total_pages + 1) %}
                                                <li><a href="{{ url_for('CrossRefPart', page=p, search=search_query) }}">{{ p }}</a></li>
                                                {% endfor %}
                                                {% if page < total_pages %}
                                                <li><a href="{{ url_for('CrossRefPart', page=page+1, search=search_query) }}">Next</a></li>
                                                <li><a href="{{ url_for('CrossRefPart', page=total_pages, search=search_query) }}">Last</a></li>
                                                {% endif %}
                                            </ul>
                                            
                                        </div>
                                        
                                        
                                    </div>
                                  </form>
                                </div>
                

                        </main>
                                                    <!-- Modal for adding a new contact -->
                            <div class="modal fade" id="addContactModal" tabindex="-1" role="dialog" aria-labelledby="addContactModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="addContactModalLabel">Add CrossRefPart</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <form method="POST" action="{{ url_for('add_crossref') }}" enctype="multipart/form-data">
                                                <!-- Supplier Name Field -->
                                                <div class="form-group ">
                                                    <label for="file">Upload Excel:</label>
                                                    <input type="file" class="form-control" id="file" name="file" accept=".xlsx, .xls">
                                                </div>
                                                <a id="download_linkss" href="/uploads/add_suppliers.xlsx">Download Sample File</a><br><br>

                                                
                                            

                                                <button type="submit" class="btn btn-primary">Submit</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                                {%include"footer.html"%}
                        <script>
                             document.addEventListener('DOMContentLoaded', () => {
                                const addRowBtn = document.getElementById('addRowBtn');
                                const productTable = document.getElementById('productTable').getElementsByTagName('tbody')[0];
                                let rowCount = 0;
                            
                                addRowBtn.addEventListener('click', addRow);
                            
                                function addRow() {
                                    rowCount++;
                                    const row = productTable.insertRow();
                            
                                    row.innerHTML = `
                                    td><input type="text" min="0" class="ContactPerson" placeholder="ContactPerson"></td>
                                    <td><input type="text" min="0" class="Contactnumber" placeholder="Contactnumber"></td>
                                    <td><input type="text" min="0" class="Department" placeholder="Department"></td>
                                     <td><input type="text" min="0" class="Whatsapp" placeholder="Whatsapp"></td>
                                    <td><input type="email" min="0" class="email" placeholder="email"></td>
                                    <td><input type="text" min="0" class="skype" placeholder="skype"></td>
                                    <td>
                                        <select>
                                        <option value="Supplier1">Supplier1</option>
                                        <option value="Supplier2">Supplier2</option>
                                        <option value="Supplier3">Supplier1</option>
                                    </select>
                                    <td><input type="Date" min="0" class="Date" placeholder="Date"></td>
                                    <td><button class="delete-btn btn-danger">X</button></td>
                                    `;
                            
                                    const deleteBtn = row.querySelector('.delete-btn');
                                    deleteBtn.addEventListener('click', () => {
                                        row.remove();
                                        // updateRowNumbers();
                                    });
                            
                                    const totalQuantityInput = row.querySelector('.total-quantity');
                                    const priceInput = row.querySelector('.price');
                                    const orderQuantityInput = row.querySelector('.order-quantity');
                                    const totalPriceInput = row.querySelector('.total-price');
                            
                                    totalQuantityInput.addEventListener('input', updateTotalPrice);
                                    priceInput.addEventListener('input', updateTotalPrice);
                                    orderQuantityInput.addEventListener('input', updateTotalPrice);
                                }
                            
                                function updateRowNumbers() {
                                    rowCount = 0;
                                    const rows = productTable.getElementsByTagName('tr');
                                    for (let row of rows) {
                                        rowCount++;
                                        row.cells[0].textContent = rowCount;
                                    }
                                }
                            
                                function updateTotalPrice() {
                                    const row = this.closest('tr');
                                    const totalQuantity = parseFloat(row.querySelector('.total-quantity').value) || 0;
                                    const price = parseFloat(row.querySelector('.price').value) || 0;
                                    const orderQuantity = parseFloat(row.querySelector('.order-quantity').value) || 0;
                                    const totalPrice = price * orderQuantity;
                                    row.querySelector('.total-price').value = totalPrice.toFixed(2);
                                }
                            
                                // Initialize the first row
                                addRow();
                            });
                            document.addEventListener('DOMContentLoaded', () => {
                                const addNewBtn = document.getElementById('addNewBtn');
                                const modal = document.getElementById('dialog');
                                const span = document.getElementsByClassName('close')[0];
                                const form = document.getElementById('studentForm');
                                const tableBody = document.querySelector('#studentTable tbody');
                                const entriesSelect = document.getElementById('entriesSelect');
                                const searchInput = document.getElementById('searchInput');
                                const pagination = document.getElementById('pagination');
                            
                               
                              
                            
                                addNewBtn.onclick = function() {
                                    modal.style.display = 'block';
                                }
                            
                                span.onclick = function() {
                                    modal.style.display = 'none';
                                }
                            
                                window.onclick = function(event) {
                                    if (event.target == modal) {
                                        modal.style.display = 'none';
                                    }
                                }
                            
                                
                            
                            
                            });
                          
    
                        </script>
                       
               
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="js/scripts.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
        <script src="assets/demo/chart-area-demo.js"></script>
        <script src="assets/demo/chart-bar-demo.js"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js" crossorigin="anonymous"></script>
        <script src="assets/demo/datatables-demo.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
        <script>
            $(document).ready(function() {
                // Set the active link on page load based on the current URL
                var currentPath = window.location.pathname;
                $('.sb-sidenav .nav-link').each(function() {
                    var linkPath = $(this).attr('href');
                    if (currentPath.indexOf(linkPath) !== -1) {
                        $(this).addClass('active');
                    }
                });
        
                // Update the active link on click
                $('.sb-sidenav .nav-link').on('click', function() {
                    $('.sb-sidenav .nav-link').removeClass('active');
                    $(this).addClass('active');
                });
            });
        </script>
    </body>
</html>

{% include "alert.html" %}
{% extends "uppercase.html"%}