<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>OmniPro Pvt Ltd</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet"
        crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" crossorigin="anonymous">
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@700&display=swap" rel="stylesheet">
    
    <style>
        .nav-linkk {
            display: flex;
            align-Items: center;
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
            position: relative;
            margin-left:20px;
        }
       .kk{
        position:relative;
        margin-right: 10px;
       }

    </style>
</head>

<body class="sb-nav-fixed">
    {%include "header.html"%}

            <main>


                <!-- <div class="container form-container"> -->
                <form action="{{ url_for('Suppliers_Offers') }}" method="POST" enctype="multipart/form-data">


                    <div id="dialog" class="modal">
                        <div class="modal-content" style="width: 1300px;">
                            <span class="close">&times;</span>
                            <h2>Add New Suppliers Offers</h2>
                            <form id="studentForm" action="{{ url_for('Suppliers_Offers') }}" method="POST"
                                enctype="multipart/form-data">
                                <!-- Supplier Information Fields -->
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="suppliername"><b>Supplier Name:</b></label>
                                        <select class="form-control" id="suppliername" name="suppliername" required onblur="check_supp_offer()"> 
                                            <option value="">Select Supplier Name</option>
                                            {% for supplier in suppliers %}
                                                <option value="{{ supplier[1] }}">{{ supplier[1] }}</option>
                                            {% endfor %}
                                        </select>
                                        <!-- <small id="customernameHelp" class="form-text text-muted">Enter a unique RFQ NO</small> -->
                                        
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="date"><b>Date:</b></label>
                                        <input type="date"class="form-control"  id="date" name="date" max="{{ max_date }}"> 
                                    </div>
                                </div>

                                <!-- Additional Fields -->
                                <div class="form-row">
                                    
                                    <div class="form-group col-md-6">
                                        <label for="comments"><b>Remarks:</b></label>
                                        <textarea class="form-control" id="remarks" name="remarks"
                                            placeholder="Enter comments" rows="3"></textarea>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="comments"><b>Comments:</b></label>
                                        <textarea class="form-control" id="comments" name="comments"
                                            placeholder="Enter comments" rows="3"></textarea>
                                    </div>
                                </div>

                                <!-- Items/Parts Details -->
                                <h5>Add ITEM/PART NO. details for SURPLUS QTY:</h5>
                                <table id="product_table" class="table no-border">
                                    <thead>
                                        <tr>
                                            <th>Manufacturer Part No</th>
                                            <th>Description</th>
                                            <th>Manufacturer</th>
                                            <th>Qty(SURPLUS)</th>
                                            <th>Price</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                      
                                    </tbody>
                                </table>
                                <input type="hidden" name="contact_count" id="contact_count" value="1">
                                <button type="button" style="width: 8%;" id="add_contact"
                                    class="btn btn-primary btn-sm">Add Item</button>

                                <br><br>
                                <div class="form-group col-md-4">
                                    <label for="file"><b>Upload Excel:</b></label>
                                    <input type="file" class="form-control" id="file" name="file" accept=".xlsx, .xls">
                                </div>
                                <a id="download_link" href="/uploads/suppliers_offers.xlsx">Download Sample File</a><br><br>

                                <div class="form-row">
                                    <button type="submit" style="width: 5%;" class="btn btn-primary btn-sm">Submit</button><br>

                                    <button type="button" style="width: 5%;margin-left:10px;" class="btn btn-secondary btn-sm" id="close_modal">Close</button>
                            </div>                            </form>
                        </div>
                    </div>
                   
                    <div class="card mb-4">
                        <div class="card-header" style="padding: 5px 10px; height: 50px;">
                            <div class="d-flex justify-content-between align-items-center h-100">
                                <!-- Left-side buttons (Add, Contacts, Export) -->
                                <div class="d-flex align-items-center" style="gap: 10px;">
                                    <button id="addNewBtn" type="button" class="btn btn-primary" 
                                            style="padding: 5px 10px; font-size: 0.85rem; border-radius: 5px;">
                                        <i class="fas fa-plus"></i> Add
                                    </button>
                                    <a href="{{ url_for('manage_suppliers_offers') }}">
                                        <button type="button" class="btn btn-danger" 
                                                style="padding: 5px 10px; font-size: 0.85rem; border-radius: 5px;">
                                            Items
                                        </button>
                                    </a>
                                    <a href="{{ url_for('export_suppliers_offers_data') }}">
                                        <button type="button" class="btn btn-success" 
                                                style="padding: 5px 10px; font-size: 0.85rem; border-radius: 5px;">
                                            Export
                                        </button>
                                    </a>
                                </div>
                                <h2 style="color: #20B2AA;"> SUPPLIERS OFFERS</h2>
                                <!-- Right-side Search form -->
                                <div class="d-flex align-items-center">
                                    <form method="GET" action="{{ url_for('Suppliers_Offers') }}" class="d-flex align-items-center" enctype="multipart/form-data" style="gap: 5px;">
                                        <label for="search" class="mb-0" style="margin-right: 5px; font-size: 0.85rem;">Search:</label>
                                        <input type="text" id="search" name="search" value="{{ search_query }}" 
                                               class="form-control form-control-sm" style="padding: 5px; font-size: 0.85rem; border-radius: 5px;">
                                        <button type="submit" class="btn btn-primary" style="padding: 5px 10px; font-size: 0.85rem; border-radius: 5px;">
                                            Search
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                       
                        <div class="table-responsive">
                            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>

                                        <th scope="col">Supplier Name</th>
                                        <th scope="col">Date</th>
                                        <th scope="col">Remarks</th>
                                        <th scope="col">Comments</th>
                                        <!-- <th scope="col">Manufacturer Part No</th>
                                                            <th scope="col">Description</th>
                                                            <th scope="col">Manufacturer</th>
                                                            <th scope="col">Qty(SURPLUS)</th>
                                                            <th scope="col">Date</th> -->
                                        <th scope="col">Action</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    {% for record in suppliersoffer %}
                                    <tr>
                                        <td>{{ (page - 1) * per_page + loop.index }}</td>
                                        <td>{{ record[1] }}</td>
                                        <td>{{ record[2] }}</td>
                                        <td>{{ record[3] }}</td>
                                        <td>{{ record[4] }}</td>

                                        <!-- <td>
                                            <a href="/update_supplier_offers/{{record.0}}" class="btn btn-warning btn-sm"
                                                data-toggle="modal" data-target="#modaledit{{record.0}}">Edit</a>
                                            <a href="/delete_suppliersoffer/{{ record.0 }}"
                                                onclick="return confirm('Are Sure Want To Deleted ?')"
                                                class="btn btn-danger btn-sm">Delete</a>

                                        </td> -->
                                        <td>
                                            <!-- <a href="/update_customers/{{ record[0] }}" class="btn btn-warning btn-sm" data-toggle="modal" data-target="#modaleditt{{ record[0] }}">                    <i class="fas fa-edit"></i> -->
                                            <!-- </a> -->
                                            <a href="/update_supplier_offers/{{ record[0] }}" class="btn btn-warning btn-sm"
                                            data-toggle="modal" data-target="#modaleditsupp{{ record[0] }}"
                                            style="position: relative; display: inline-block; cursor: pointer;"
                                            onmouseover="this.querySelector('.tooltiptext').style.visibility = 'visible'; this.querySelector('.tooltiptext').style.opacity = '1';"
                                            onmouseout="this.querySelector('.tooltiptext').style.visibility = 'hidden'; this.querySelector('.tooltiptext').style.opacity = '0';">
                                            <i class="fas fa-edit"></i>
                                            <span class="tooltiptext" style="
                                                visibility: hidden;
                                                width: 120px;
                                                background-color: black;
                                                color: #fff;
                                                text-align: center;
                                                border-radius: 5px;
                                                padding: 5px;
                                                position: absolute;
                                                z-index: 1;
                                                bottom: 125%;
                                                left: 50%;
                                                margin-left: -60px;
                                                opacity: 0;
                                                transition: opacity 0.3s;
                                            ">Edit</span>
                                         </a>
                                            <!-- <a href="/delete_customers/{{ record[0] }}" onclick="return confirm('Are you sure you want to delete?')" class="btn btn-danger btn-sm">                    <i class="fas fa-trash-alt"></i>
                                            </a> -->
                                            <a href="/delete_suppliersoffer/{{ record[0] }}" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete?')"
                                            
                                            style="position: relative; display: inline-block; cursor: pointer;"
                                            onmouseover="this.querySelector('.tooltiptext').style.visibility = 'visible'; this.querySelector('.tooltiptext').style.opacity = '1';"
                                            onmouseout="this.querySelector('.tooltiptext').style.visibility = 'hidden'; this.querySelector('.tooltiptext').style.opacity = '0';">
                                            <i class="fas fa-trash-alt"></i>
                                            <span class="tooltiptext" style="
                                                visibility: hidden;
                                                width: 120px;
                                                background-color: black;
                                                color: #fff;
                                                text-align: center;
                                                border-radius: 5px;
                                                padding: 5px;
                                                position: absolute;
                                                z-index: 1;
                                                bottom: 125%;
                                                left: 50%;
                                                margin-left: -60px;
                                                opacity: 0;
                                                transition: opacity 0.3s;
                                            ">Delete</span>
                                         </a>
                                            <!-- <a href="#" class="btn btn-success btn-sm" data-toggle="modal" data-target="#myModal">+</a> -->
                                            <a href="/add_supplier_offer/{{ record[0] }}" class="btn btn-primary btn-sm"
                                            data-toggle="modal" data-target="#modaledit{{ record[0] }}"
                                            style="position: relative; display: inline-block; cursor: pointer;"
                                            onmouseover="this.querySelector('.tooltiptext').style.visibility = 'visible'; this.querySelector('.tooltiptext').style.opacity = '1';"
                                            onmouseout="this.querySelector('.tooltiptext').style.visibility = 'hidden'; this.querySelector('.tooltiptext').style.opacity = '0';">
                                            +
                                            <span class="tooltiptext" style="
                                                visibility: hidden;
                                                width: 120px;
                                                background-color: black;
                                                color: #fff;
                                                text-align: center;
                                                border-radius: 5px;
                                                padding: 5px;
                                                position: absolute;
                                                z-index: 1;
                                                bottom: 125%;
                                                left: 50%;
                                                margin-left: -60px;
                                                opacity: 0;
                                                transition: opacity 0.3s;
                                            ">Add Suppliers_Offers</span>
                                         </a>
                                         <a href="/add_supplieroffer_excel/{{ record[0] }}" class="btn btn-success btn-sm"
                                            data-toggle="modal" data-target="#modalledit{{ record[0] }}"
                                            style="position: relative; display: inline-block; cursor: pointer;"
                                            onmouseover="this.querySelector('.tooltiptext').style.visibility = 'visible'; this.querySelector('.tooltiptext').style.opacity = '1';"
                                            onmouseout="this.querySelector('.tooltiptext').style.visibility = 'hidden'; this.querySelector('.tooltiptext').style.opacity = '0';">
                                            <span class="material-symbols-outlined">
                                                cloud_upload
                                                </span>
                                            <span class="tooltiptext" style="
                                                visibility: hidden;
                                                width: 120px;
                                                background-color: black;
                                                color: #fff;
                                                text-align: center;
                                                border-radius: 5px;
                                                padding: 5px;
                                                position: absolute;
                                                z-index: 1;
                                                bottom: 125%;
                                                left: 50%;
                                                margin-left: -60px;
                                                opacity: 0;
                                                transition: opacity 0.3s;
                                            ">Import</span>
                                         </a>
                                                                                                     <!-- <a href="/add_customer_excel/{{ record[0] }}" class="btn btn-success btn-sm" data-toggle="modal" data-target="#modalledit{{ record[0] }}"><span class="material-symbols-outlined">
                                                                                                        cloud_upload
                                                                                                        </span></a> -->

                                        </td>
                                    </tr>

                                    <div class="modal fade" id="modaledit{{ record[0] }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLabel"> Add Suppliers_Offers </h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                    
                                                    <form method="post" action="{{ url_for('add_supplier_offer') }}" enctype="multipart/form-data">
                                                        <div class="form-group">
                                                            <label for="modal-name"> Supplier Name</label>
                                                            <select class="form-control" id="suppliername" name="suppliername">
                                                                {% for branch in suppliers %}
                                                                    <option value="{{ branch[1] }}" {% if branch[1] == record[1] %} selected {% endif %}>{{ branch[1] }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </div>
                                                        
                                                    
                                                        <div class="form-group">
                                                            <label for="manfacturedpartno">Manufactured Part No</label>
                                                            <select class="form-control" id="manufacturer_part_no" name="manufacturer_part_no">
                                                                {% for branch in part_item %}
                                                                    <option value="{{ branch[0] }}">{{ branch[0] }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </div>
                                                    
                                                        
                                                    
                                                        <div class="form-group">
                                                            <label for="regularquantity">Description</label>
                                                            <input type="text" class="form-control" id="description" name="description" required>
                                                        </div>
                                                        <div class="form-group"></div>
                                                            <label for="manufactured_name">Manufacturer Name</label>
                                                            <select class="form-control" id="manufacturer" name="manufacturer">
                                                                {% for branch in manufacturerproduct %}
                                                                    <option value="{{ branch[0] }}">{{ branch[0] }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </div>
                                                    
                                                        
                                                    
                                                        <div class="form-group">
                                                            <label for="quantity"> Quantity</label>
                                                            <input type="text" class="form-control" id="quantity" name="quantity" required>
                                                        </div>
                                                    
                                                        <div class="form-group">
                                                            <label for="targetprice">Price</label>
                                                            <input type="text" class="form-control" id="date" name="date" required>
                                                        </div>
                                                    
                                                        
                                                    
                                                        <button type="submit" class="btn btn-primary">Submit</button>
                                                    </form>
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>



                                    <div class="modal fade" id="modalledit{{ record[0] }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLabel"> Add supplier </h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                    
                                                    <form method="post" action="{{ url_for('add_supplieroffer_excel') }}" enctype="multipart/form-data" >
                                                        <div class="form-group">
                                                            <label for="modal-name"> Supplier Name</label>
                                                            <select class="form-control" id="suppliername" name="suppliername">
                                                                {% for branch in suppliers %}
                                                                    <option value="{{ branch[1] }}" {% if branch[1] == record[1] %} selected {% endif %}>{{ branch[1] }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </div>
                                                        
                                                        <div class="form-group ">
                                                            <label for="file">Upload Excel:</label>
                                                            <input type="file" class="form-control" id="file" name="file" accept=".xlsx, .xls">
                                                        </div>
                                                        <a id="download_links" href="{{ url_for('download_sample_excel_suppliers_offers') }}" download>Download Sample File</a><br>                                                    
                                                        <button type="submit" class="btn btn-primary">Submit</button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>



                                    <div id="modaleditsupp{{ record[0] }}" class="modal fade" role="dialog">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h4 class="modal-title">Update_supplier_offers</h4>
                                                    <span class="b" style="width: 30px; cursor: pointer; font-size: 24px; padding: 5px; display: inline-block; text-align: center;font-weight:bold;" data-dismiss="modal">x</span>

                                                </div>
                                                <div class="modal-body">
                                                    <form action="{{ url_for('update_supplier_offers') }}" method="POST">
                                                        <input type="hidden" name="id" value="{{ record[0] }}">
                                                        <div class="form-group">
                                                            <label for="modal-name"> Suppliers Name</label>
                                                            <select class="form-control" id="suppliername" name="suppliername">
                                                                {% for branch in suppliers %}
                                                                    <option value="{{ branch[1] }}" {% if branch[1] == record[1] %} selected {% endif %}>{{ branch[1] }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Date</label>
                                                            <input type="date" class="form-control" name="date" value="{{ record[2] }}" max="{{ max_date }}" >
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Remarks</label>
                                                            <input type="text" class="form-control" name="remarks" value="{{ record[3] }}" >
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Comments</label>
                                                            <input type="text" class="form-control" name="comments" value="{{ record[4] }}" >
                                                        </div>
                                                        
                                                        
                                                        
                                                    <button type="submit" class="btn btn-primary">Update</button>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {% endfor %}
                                </tbody>
                            </table>
                            <ul class="pagination" style="display: flex;justify-content: flex-end;padding: 20px;">
                                {% if page > 1 %}
                                <li><a href="{{ url_for('Suppliers_Offers', page=1, search=search_query) }}">First</a></li>
                                <li><a href="{{ url_for('Suppliers_Offers', page=page-1, search=search_query) }}">Previous</a></li>
                                {% endif %}
                                {% for p in range(1, total_pages + 1) %}
                                <li><a href="{{ url_for('Suppliers_Offers', page=p, search=search_query) }}">{{ p }}</a></li>
                                {% endfor %}
                                {% if page < total_pages %}
                                <li><a href="{{ url_for('Suppliers_Offers', page=page+1, search=search_query) }}">Next</a></li>
                                <li><a href="{{ url_for('Suppliers_Offers', page=total_pages, search=search_query) }}">Last</a></li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>

                </form>
                </form>

            </main>

            <footer class="py-4 bg-light mt-auto">
                <div class="container-fluid">
                    <div class="d-flex align-Items-center justify-content-between small">
                        <div class="text-muted">Copyright &copy; OmniPro Pvt Ltd</div>
                        <div>
                            <!-- <a href="#">Privacy Policy</a>
                                &middot; -->
                            <a href="#">AeriesSoft Tech Solution </a>
                        </div>
                    </div>
                </div>
            </footer>
        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

        <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"
            crossorigin="anonymous"></script>
        <script src="js/scripts.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous">
        </script>
        <script src="assets/demo/chart-area-demo.js"></script>
        <script src="assets/demo/chart-bar-demo.js"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js" crossorigin="anonymous">
        </script>
        <script src="assets/demo/datatables-demo.js"></script>
        <script>
            $(document).ready(function () {
                // Set the active link on page load based on the current URL
                var currentPath = window.location.pathname;
                $('.sb-sidenav .nav-link').each(function () {
                    var linkPath = $(this).attr('href');
                    if (currentPath.indexOf(linkPath) !== -1) {
                        $(this).addClass('active');
                    }
                });

                // Update the active link on click
                $('.sb-sidenav .nav-link').on('click', function () {
                    $('.sb-sidenav .nav-link').removeClass('active');
                    $(this).addClass('active');
                });
            });
        </script>
</body>

</html>


<script>
    document.getElementById('add_contact').addEventListener('click', async function () {
        var contactCount = parseInt(document.getElementById('contact_count').value);
        contactCount += 1;
        document.getElementById('contact_count').value = contactCount;

        var table = document.getElementById('product_table').getElementsByTagName('tbody')[0];
        var newRow = table.insertRow();
        var nameCell = newRow.insertCell(0);
        var numberCell = newRow.insertCell(1);
        var depCell = newRow.insertCell(2);
        var whatsCell = newRow.insertCell(3);
        var emailCell = newRow.insertCell(4);
        var actionCell = newRow.insertCell(5);

        // Create dropdowns for part numbers and manufacturer names
        const partDropdown = await createPartDropdown(contactCount);
        const manufacturerDropdown = await createManufacturerDropdown(contactCount);

        nameCell.appendChild(partDropdown);
        depCell.appendChild(manufacturerDropdown);

        numberCell.innerHTML =
            `<input type="text" class="form-control" name="contact_des_${contactCount}" required oninput="this.value = this.value.toUpperCase()" style="text-transform: uppercase;width:500px;"'>`;
        whatsCell.innerHTML =
            `<input type="text" class="form-control" name="contact_qty_${contactCount}" style="width:100px;" required>`;
        emailCell.innerHTML =
            `<input type="text" class="form-control" name="contact_date_${contactCount}" style="width:100px;"  required oninput="this.value = this.value.toUpperCase()" style="text-transform: uppercase;"'>`;

        actionCell.innerHTML = `<button type="button" class="btn btn-danger remove-contact">Remove</button>`;

        newRow.querySelector('.remove-contact').addEventListener('click', function () {
            if (confirm('Are you sure you want to remove this contact?')) {
                newRow.remove();
            }
        });
    });

    async function fetchPartNumbers() {
        try {
            const response = await fetch('/get_part_no'); // Ensure this endpoint is correct
            const parts = await response.json();
            return parts;
        } catch (error) {
            console.error('Error fetching part numbers:', error);
            return [];
        }
    }

    async function fetchManufacturers() {
        try {
            const response = await fetch('/get_manufacturer_name'); // Ensure this endpoint is correct
            const manufacturers = await response.json();
            return manufacturers;
        } catch (error) {
            console.error('Error fetching manufacturers:', error);
            return [];
        }
    }

    async function createPartDropdown(contactCount) {
        const partNumbers = await fetchPartNumbers();
        let select = document.createElement('select');
        select.className = 'form-control';
        select.name = `contact_part_${contactCount}`; // Corrected syntax
        select.required = true;
        select.style.width = '200px';  // You can adjust the value as needed


        let defaultOption = document.createElement('option');
        defaultOption.text = 'Select Part';
        defaultOption.value = '';
        select.appendChild(defaultOption);

        partNumbers.forEach(part => {
            let option = document.createElement('option');
            option.value = part; // Assuming part is a string
            option.text = part; // Assuming part is a string
            select.appendChild(option);
        });

        return select;
    }

    async function createManufacturerDropdown(contactCount) {
        const manufacturers = await fetchManufacturers();
        let select = document.createElement('select');
        select.className = 'form-control';
        select.name = `contact_manufacturer_${contactCount}`; // Corrected syntax
        select.required = true;

        let defaultOption = document.createElement('option');
        defaultOption.text = 'Select Manufacturer';
        defaultOption.value = '';
        select.appendChild(defaultOption);

        manufacturers.forEach(manufacturer => {
            let option = document.createElement('option');
            option.value = manufacturer; // Assuming manufacturer is a string
            option.text = manufacturer; // Assuming manufacturer is a string
            select.appendChild(option);
        });

        return select;
    }

    document.querySelectorAll('.remove-contact').forEach(function (button) {
        button.addEventListener('click', function () {
            if (confirm('Are you sure you want to remove this contact?')) {
                button.closest('tr').remove();
            }
        });
    });
</script>









<script>
    document.addEventListener('DOMContentLoaded', () => {
        const addNewBtn = document.getElementById('addNewBtn');
        const modal = document.getElementById('dialog');
        const span = document.getElementsByClassName('close')[0];
        const form = document.getElementById('studentForm');
        const tableBody = document.querySelector('#studentTable tbody');
        const entriesSelect = document.getElementById('entriesSelect');
        const searchInput = document.getElementById('searchInput');
        const pagination = document.getElementById('pagination');

        addNewBtn.onclick = function () {
            modal.style.display = 'block';
        }

        span.onclick = function () {
            modal.style.display = 'none';
        }

        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }



        entriesSelect.addEventListener('change', function () {
            entriesPerPage = parseInt(entriesSelect.value, 10);
            currentPage = 1;
            renderTable();
        });

        searchInput.addEventListener('input', function () {
            currentPage = 1;
            renderTable();
        });

        renderTable();
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var filePath = '/download/suppliers_offers.xlsx'; // Path to your download route
        var downloadLink = document.getElementById('download_link');
        
        // Set the href attribute to the file path
        downloadLink.href = filePath;
        downloadLink.download = 'suppliers_offers.xlsx'; // Optional: specify the filename for the download
    });
    document.addEventListener('DOMContentLoaded', function() {
        var filePath = '/download/suppliers_offers.xlsx'; // Path to your download route
        var downloadLink = document.getElementById('download_links');
        
        // Set the href attribute to the file path
        downloadLink.href = filePath;
        downloadLink.download = 'suppliers_offers.xlsx'; // Optional: specify the filename for the download
    });
</script>
{% include "close.html" %}

{% extends "uppercase.html" %}
{% include "alert.html" %}